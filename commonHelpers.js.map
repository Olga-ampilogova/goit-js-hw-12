{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\r\n// Додатковий імпорт стилів\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n// Описаний у документації\r\nimport SimpleLightbox from \"simplelightbox\";\r\n// Додатковий імпорт стилів\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\nimport axios from \"axios\";\r\n\r\nwindow.scrollBy(0, window.innerHeight);\r\nwindow.scrollBy(0, -window.innerHeight);\r\n\r\nconst item = document.querySelector('.gallery');\r\nconst inputValue = document.querySelector('.searchform')\r\nconst searchForm = document.querySelector('.search-form');\r\nconst loadingIndicator  = document.querySelector('.spinner');\r\nconst loadMoreButton = document.querySelector('.load_more');\r\n\r\n\r\n\r\nlet perPage = 40;\r\nconst totalPages = Math.ceil(100 / perPage);\r\nlet page = 1;\r\nlet gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt', close: true, className: 'modal-style' });\r\ngallery.on('show.simplelightbox', function () {});\r\naxios.defaults.baseURL = 'https://pixabay.com/api';\r\nconst myAPI_KEY = '41618210-7d4eb9e03ab25b6c1f3452a1d';\r\nconst queryParams = {\r\n    key: myAPI_KEY,\r\n    q: '',\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: 'true',\r\n    per_page: perPage,\r\n    page: page,\r\n};\r\n\r\nasync function fetchPhotos() {\r\n    showLoad();\r\n    hideMoreButton()\r\n    if (page > totalPages) {\r\n        hideLoad();\r\n        iziToast.error({\r\n            position: \"topCenter\",\r\n            message: \"We're sorry, there are no more posts to load\"\r\n        });\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get('/', { params: queryParams });\r\n        const { hits } = response.data;\r\n\r\n        if (hits.length === 0) {\r\n            iziToast.error({\r\n                title: 'Error',\r\n                position: 'topCenter',\r\n                message: \"Sorry, there are no images matching your search query. Please try again!\"\r\n            });\r\n            return console.log(response.data);\r\n        }\r\n\r\n        let renderImages = hits.reduce(\r\n            (html, image) =>\r\n                html +\r\n                `<li class=\"gallery-item\">\r\n                        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\r\n                            <img class=\"gallery-image\" data-source=\"${image.largeImageURL}\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\"/>\r\n                        </a>\r\n                        <div class='title'>\r\n                            <p>Likes:<span class=\"value\">${image.likes}</span></p>\r\n                            <p>Views:<span class=\"value\">${image.views}</span></p>\r\n                            <p>Comments:<span class=\"value\">${image.comments}</span></p>\r\n                            <p>Downloads:<span class=\"value\">${image.downloads}</span></p>\r\n                        </div>\r\n                </li>`,\r\n            '');\r\n        item.insertAdjacentHTML(\"beforeend\", renderImages);\r\n        gallery.refresh();\r\n        hideLoad();\r\n        showMoreButton();\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n}\r\nloadMoreButton.addEventListener(\"click\", async () => {\r\n    hideMoreButton();\r\n    showLoad();\r\n    try {\r\n        page += 1;\r\n        queryParams.page = page;\r\n        const posts = await fetchPhotos();\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n    const myImage = document.querySelector('.gallery-item');\r\n    const buttonRect = myImage.getBoundingClientRect();\r\n    const buttonHeight = buttonRect.height;\r\n    window.scrollBy({\r\n    top: buttonHeight*2,\r\n    behavior: 'smooth',\r\n  });\r\n});\r\n\r\nsearchForm.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n    page = 1;\r\n    if (inputValue.value.trim().length === 0) {\r\n        return;\r\n    }\r\n    cleanScreen();\r\n    showLoad();\r\n    queryParams.q = inputValue.value;\r\n    fetchPhotos();\r\n    inputValue.value = '';\r\n});\r\n\r\nfunction cleanScreen() {\r\n    item.replaceChildren();\r\n}\r\n\r\nfunction hideLoad() {\r\n    loadingIndicator .style.visibility = 'hidden';\r\n      }\r\nfunction showLoad() {\r\n    loadingIndicator .style.visibility = 'visible';\r\n      }\r\nfunction showMoreButton() {\r\n    loadMoreButton.style.visibility = 'visible';\r\n}\r\n\r\nfunction hideMoreButton() {\r\n    loadMoreButton.style.visibility = 'hidden';\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["item","inputValue","searchForm","loadingIndicator","loadMoreButton","perPage","totalPages","page","gallery","SimpleLightbox","axios","myAPI_KEY","queryParams","fetchPhotos","showLoad","hideMoreButton","hideLoad","iziToast","response","hits","renderImages","html","image","showMoreButton","error","posts","buttonHeight","event","cleanScreen"],"mappings":"owBASA,OAAO,SAAS,EAAG,OAAO,WAAW,EACrC,OAAO,SAAS,EAAG,CAAC,OAAO,WAAW,EAEtC,MAAMA,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAoB,SAAS,cAAc,UAAU,EACrDC,EAAiB,SAAS,cAAc,YAAY,EAI1D,IAAIC,EAAU,GACd,MAAMC,EAAa,KAAK,KAAK,IAAMD,CAAO,EAC1C,IAAIE,EAAO,EACPC,EAAU,IAAIC,EAAe,aAAc,CAAE,aAAc,IAAK,aAAc,MAAO,MAAO,GAAM,UAAW,aAAe,CAAA,EAChID,EAAQ,GAAG,sBAAuB,UAAY,CAAA,CAAE,EAChDE,EAAM,SAAS,QAAU,0BACzB,MAAMC,EAAY,qCACZC,EAAc,CAChB,IAAKD,EACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUN,EACV,KAAME,CACV,EAEA,eAAeM,GAAc,CAGzB,GAFAC,IACAC,EAAgB,EACZR,EAAOD,EAAY,CACnBU,IACAC,EAAS,MAAM,CACX,SAAU,YACV,QAAS,8CACrB,CAAS,EACD,MACH,CAED,GAAI,CACA,MAAMC,EAAW,MAAMR,EAAM,IAAI,IAAK,CAAE,OAAQE,CAAW,CAAE,EACvD,CAAE,KAAAO,CAAI,EAAKD,EAAS,KAE1B,GAAIC,EAAK,SAAW,EAChB,OAAAF,EAAS,MAAM,CACX,MAAO,QACP,SAAU,YACV,QAAS,0EACzB,CAAa,EACM,QAAQ,IAAIC,EAAS,IAAI,EAGpC,IAAIE,EAAeD,EAAK,OACpB,CAACE,EAAMC,IACHD,EACA;AAAA,wDACwCC,EAAM;AAAA,sEACQA,EAAM,uBAAuBA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA,2DAG1EA,EAAM;AAAA,2DACNA,EAAM;AAAA,8DACHA,EAAM;AAAA,+DACLA,EAAM;AAAA;AAAA,uBAGzD,EAAE,EACNtB,EAAK,mBAAmB,YAAaoB,CAAY,EACjDZ,EAAQ,QAAO,EACfQ,IACAO,GACH,OAAQC,EAAP,CACE,QAAQ,MAAMA,CAAK,CACtB,CACL,CACApB,EAAe,iBAAiB,QAAS,SAAY,CACjDW,IACAD,IACA,GAAI,CACAP,GAAQ,EACRK,EAAY,KAAOL,EACnB,MAAMkB,EAAQ,MAAMZ,GACvB,OAAQW,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CAGD,MAAME,EAFU,SAAS,cAAc,eAAe,EAC3B,wBACK,OAChC,OAAO,SAAS,CAChB,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAAC,EAEDxB,EAAW,iBAAiB,SAAWyB,GAAU,CAC7CA,EAAM,eAAc,EACpBpB,EAAO,EACHN,EAAW,MAAM,KAAI,EAAG,SAAW,IAGvC2B,IACAd,IACAF,EAAY,EAAIX,EAAW,MAC3BY,IACAZ,EAAW,MAAQ,GACvB,CAAC,EAED,SAAS2B,GAAc,CACnB5B,EAAK,gBAAe,CACxB,CAEA,SAASgB,GAAW,CAChBb,EAAkB,MAAM,WAAa,QAClC,CACP,SAASW,GAAW,CAChBX,EAAkB,MAAM,WAAa,SAClC,CACP,SAASoB,GAAiB,CACtBnB,EAAe,MAAM,WAAa,SACtC,CAEA,SAASW,GAAiB,CACtBX,EAAe,MAAM,WAAa,QACtC"}